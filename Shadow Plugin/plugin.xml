<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="4.5"?>
<plugin>
	<extension
       name="org.eclipse.debug.core.launchConfigurationTypes"
       point="org.eclipse.core.filebuffers.documentSetup">
      <participant
            class="shadow.plugin.editor.ShadowDocumentSetupParticipant"
            extensions="shadow,meta">
      </participant>
   </extension>
   
   <extension
         point="org.eclipse.ui.editors">
      <editor
            name="Shadow Editor"
            extensions="shadow"
            icon="icons/shadow_file.gif"
            contributorClass="org.eclipse.ui.texteditor.BasicTextEditorActionContributor"
            class="shadow.plugin.editor.ShadowEditor"
            id="shadow.plugin.editor.ShadowEditor">
      </editor>
      <editor
            name="Shadow Editor"
            extensions="meta"
            icon="icons/meta_file.gif"
            contributorClass="org.eclipse.ui.texteditor.BasicTextEditorActionContributor"
            class="shadow.plugin.editor.ShadowEditor"
            id="shadow.plugin.editor.ShadowEditor">
      </editor>
   </extension>
   <extension
   		point = "org.eclipse.core.filebuffers.annotationModelCreation">
   		<factory
   			extensions="*"
   			class="org.eclipse.ui.texteditor.ResourceMarkerAnnotationModelFactory">
   		</factory>
   </extension>
   <extension
      point = "org.eclipse.ui.preferencePages">
       <page
            class="shadow.plugin.preferences.PreferencePage"
            id="shadow.plugin.preferences.PreferencePage"
            name="Shadow">
      </page>
   </extension>
   
   <extension
         point="org.eclipse.debug.core.launchConfigurationTypes">
         <launchConfigurationType
	        name="Shadow Launch"
	        delegate="shadow.plugin.launcher.ShadowLaunchConfigurationDelegate"
	        modes="run"
	        id="shadow.plugin.launcher.launchConfigurationType">
	    </launchConfigurationType>
   </extension>   
  
   <extension
   		point = "org.eclipse.debug.ui.launchConfigurationTabGroups">
   		<launchConfigurationTabGroup
   			id = "shadow.plugin.launcher.launchConfigurationTabGroup"
   			type = "shadow.plugin.launcher.launchConfigurationType"
   			class = "shadow.plugin.launcher.ShadowTabGroup">
   		</launchConfigurationTabGroup>
   	</extension>
  
  	<extension
        point="org.eclipse.debug.ui.launchConfigurationTypeImages">
	    <launchConfigurationTypeImage
	            id="shadow.plugin.launcher.launchconfigurationtypeimage"
	            configTypeID="shadow.plugin.launcher.launchConfigurationType"
	            icon="icons/shadow.png">
	    </launchConfigurationTypeImage>
	</extension>
   
   
   <extension
	    point="org.eclipse.debug.ui.launchShortcuts">
	    <shortcut
	        class="shadow.plugin.launcher.ShadowLaunchShortcut"
	        icon="icons/shadow.png"
	        id="org.shadow-language.shadowShortCut"
	        label="Shadow Application"
	        modes="run"
	        description="Run Shadow program, compiling first if main source file has been updated more recently than executable.">
	        <contextualLaunch>
	            <enablement>
	                <with variable="selection">
	                    <count value="1"/>
	                    <iterate>
		                     <instanceof value="org.eclipse.core.resources.IFile"/>
		                     <test
		                           value="*.shadow"
		                           property="org.eclipse.debug.ui.matchesPattern"/>
                  		</iterate>
	                </with>
	            </enablement>
	        </contextualLaunch>
	    </shortcut>
	    <shortcut
	        class="shadow.plugin.launcher.ShadowCompileShortcut"
	        icon="icons/shadow.png"
	        id="org.shadow-language.shadowShortCut"
	        label="Shadow Compile Only"
	        modes="run"
	        description="Compile Shadow program but do not run, forcing compilation even if main source file has been updated more recently than executable.">
	        <contextualLaunch>
	            <enablement>
	                <with variable="selection">
	                    <count value="1"/>
	                    <iterate>
		                     <instanceof value="org.eclipse.core.resources.IFile"/>
		                     <test
		                           value="*.shadow"
		                           property="org.eclipse.debug.ui.matchesPattern"/>
                  		</iterate>
	                </with>
	            </enablement>
	        </contextualLaunch>
	    </shortcut>
	</extension>   
   
    <extension
         point="org.eclipse.ui.console.consolePageParticipants">
      <consolePageParticipant
            class="shadow.plugin.launcher.ConsoleActions"
            id="shadow.plugin.launcher.PageParticipant">
         <enablement>
            <instanceof value="shadow.plugin.launcher.Console"/>
         </enablement>
      </consolePageParticipant>
   </extension>
      
   <extension 
   		id="problemmarker"
   		point="org.eclipse.core.resources.markers"
   		name="error">
   		<persistent value="true" />
   		<attribute name="severity" />
   		<attribute name="message" />
   		<attribute name="location" />
   	</extension>
   
</plugin>
